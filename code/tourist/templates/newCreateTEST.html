<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../static/css/bootstrap2023.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../static/owl/owl.carousel.min.css">
    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            animation: fadeIn 0.3s forwards;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: auto;
            width: 80%;
            height: 80%;
            background: #fefefe;
            animation: slideIn 0.3s forwards;
        }

        .close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        iframe {
            width: 100%;
            height: 100%;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: scale(0);
            }

            to {
                transform: scale(1);
            }
        }

        .addCommentBtn {
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid orange;
            background-color: #f3f3f3;
        }

        .addCommentSpace {
            display: none;
            margin: 0 auto;
            position: relative;
        }

        .addCTXT {
            width: 90%;
            height: 150px;
        }

        .commentSubmit {
            padding: 10px 15px;
            border-radius: 30px;
            border: 0;
            background-color: rgb(1, 154, 21);
            color: white;
            font-weight: bold;
            position: absolute;
            right: 0;
            bottom: 0;
        }

        .alreadyComment {
            margin: 0;
        }

        .otherCommentAvatar {
            display: flex;
            justify-content: center;
            align-items: center;
            align-content: center;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 1px solid black;
        }


        #imageContainer {
            position: relative;
            /* width: 300px; */
            height: 300px;
            overflow: hidden;
        }

        .image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .show {
            opacity: 1;
        }


        @media screen and (max-width: 767px) {
            .flex-container {
                flex-direction: column;
                /* 在768像素以下的螢幕上變成垂直排列 */
            }

            .item2 {
                order: -1;
            }
        }

        .containerTest {
            position: relative;
            width: 300px;
            /* 調整容器的寬度 */
        }

        .overlayTest {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
            /* 文字顏色 */
            font-size: 20px;
            /* 文字大小 */
        }

        .imageTest {
            width: 100%;
            height: auto;
            z-index: 0;
            /* 圖片放在文字的下層 */
        }

        .owl-prev,
        .owl-next {
            height: 100%;
            width: 20px;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            transition: background 0.3s;
        }

        .owl-carousel .owl-nav button.owl-next:hover,
        .owl-carousel .owl-nav button.owl-prev:hover {
            background: rgba(81, 81, 81, 0.297);
            color: white;
            border: none;
            padding: 0 !important;
            font: inherit
        }

        .owl-prev:hover,
        .owl-next:hover {
            display: block;
            height: 100%;
            width: 20px;
            background-color: rgba(0, 0, 0, 0.297);
            color: white;
        }

        .owl-prev {
            left: 0;
        }

        .owl-next {
            right: 0;
        }

        .owl-next span,
        .owl-prev span {
            font-size: 28px;
        }

        .right {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            border: 1px solid black;
            height: 500px;
            width: 150px;
            transition: right 0.3s ease;
            /* 添加过渡效果，使动画更流畅 */
        }

        .showRight_btn {
            position: absolute;
            left: -15px;
            top: 0;
            border: 1px solid black;
            height: 25px;
            width: 15px;
            cursor: pointer;
        }

        /* 隐藏右侧区域 */
        .right.hidden {
            right: -150px;
        }
    </style>
</head>

<body>
    <div class="right">
        <div id="showRight" class="showRight_btn" onclick="showRightDiv()">
            <span>
                < </span>
        </div>
        <div id="rightDiv" class="rightDiv">
            <span>Right section</span>
            <div>
                similar recommend
            </div>
            <div>
                be choosed
            </div>
        </div>
    </div>

    <div class="main" style="width: 85%;margin: 0 auto;">
        <div class="left">
            <div>
                <span>這裡顯示搜尋</span>
                <div class="searchBarDiv" style="width: 100%;border: 1px solid black;">
                    <div class="row" style="margin: 0;width: 100%;overflow-x: auto;">
                        <div style="height: 200px;width: 300px;position: relative;">
                            <img src="../static/images/101.jpg" class="img-responsive" width="100%" alt=""
                                style="position: absolute;top: 0;left: 0;height: 100%;width: 100%;object-fit: cover;">
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div>
                <div class="owl-carousel owl-theme" style="border: 1px solid black;">
                    <div class="item checkimg_div" onclick="pickspot(this)">
                        <img src="../static/images/cake01.jpg" class="img-responsive" width="100%" alt="">
                        <div style="border: 1px solid #ccc;">
                            <span>show my text</span>
                        </div>
                    </div>
                    <div class="item checkimg_div" onclick="pickspot(this)">
                        <img src="../static/images/cake01.jpg" class="img-responsive" width="100%" alt="">
                        <div style="border: 1px solid #ccc;">
                            <span>show my text</span>
                        </div>
                    </div>
                    <div class="item checkimg_div" onclick="pickspot(this)">
                        <img src="../static/images/cake01.jpg" class="img-responsive" width="100%" alt="">
                        <div style="border: 1px solid #ccc;">
                            <span>show my text</span>
                        </div>
                    </div>
                    <div class="item checkimg_div" onclick="pickspot(this)">
                        <img src="../static/images/cake01.jpg" class="img-responsive" width="100%" alt="">
                        <div style="border: 1px solid #ccc;">
                            <span>show my text</span>
                        </div>
                    </div>
                    <div class="item checkimg_div" onclick="pickspot(this)">
                        <img src="../static/images/cake01.jpg" class="img-responsive" width="100%" alt="">
                        <div style="border: 1px solid #ccc;">
                            <span>show my text</span>
                        </div>
                    </div>
                    <div class="item checkimg_div" onclick="pickspot(this)">
                        <img src="../static/images/cake01.jpg" class="img-responsive" width="100%" alt="">
                        <div style="border: 1px solid #ccc;">
                            <span>show my text</span>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div>
                <span>這裡顯示收藏</span>
            </div>
        </div>
        <div class="right"
            style="position: fixed;right: 0;top: 20%;bottom: 50%;border: 1px solid black;width: 80px;height: 500px;">
            我是右邊
        </div>
    </div>

    <div class="containerTest">
        <img src="../static/images/cake01.jpg" width="100%" alt="Your Image" class="img-responsive imageTest">
        <div class="overlayTest">
            <p>Your Text Here</p>
        </div>
    </div>


    <div class="row" style="width: 60%;text-align: center;margin: 0 auto;height: 200px;align-content: center;">
        <div class="col-6">
            <div>
                我是左邊1
                <button id="clickme1" data-target="show1" onclick="clickShow(this)">點我出現</button>
            </div>
            <div>
                我是左邊2
                <button id="clickme2" data-target="show2" onclick="clickShow(this)">點我出現</button>
            </div>
        </div>
        <div class="col-6" style="border: 1px solid black;">
            <div id="show1" style="display: none;">
                我是右邊1
            </div>
            <div id="show2" style="display: none;">
                我是右邊2 <br>
                我是右邊2 <br>
                我是右邊2
            </div>
        </div>
    </div>
    <!-- 按钮触发模态框 -->
    <a href="" class="fa-solid fa-circle-info info_icon" id="info_icon" style="font-size: 28px;"></a>

    <!-- 模态框 -->
    <div class="modal" id="myModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <iframe src="your_embedded_page_url" frameborder="0"></iframe>
        </div>
    </div>
    <main>
        <div>
            <div class="addCommentDiv">
                <button class="addCommentBtn" id="addCommentBtn" onclick="addComment()">新增評論</button>
                <div class="addCommentSpace" id="addCommentSpace" style="display: none;">
                    <textarea class="addCTXT" id="addCTXT" placeholder="留下你的印記吧"></textarea>
                    <button class="commentSubmit" id="commentSubmit" onclick="submitComment()">送出</button>
                </div>
            </div>
            <div class="row alreadyComment" id="alreadyComment">
                <div class="col-auto otherCommentAvatar">
                    <img src="../static/images/cloud1.png" class="img-responsive" style="width: 100%;" alt=""><br>
                </div>
                <div class="col otherCommentTxtDiv">
                    <span class="otherCommentTxt" id="otherCommentTxt">
                        隨邊說說這裡是評論文字的地方<br>
                        隨邊說說這裡是評論文字的地方<br>
                        隨邊說說這裡是評論文字的地方<br>
                        隨邊說說這裡是評論文字的地方
                    </span>
                </div>
            </div>
        </div>
    </main>


    <script src="../static/js/jquery-3.7.0.min.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="../static/js/owl.carousel.min.js"></script>
    <script>
        const rightBtn = document.getElementById('showRight');
        const rightDiv = document.getElementById('rightDiv'); // 修改为正确的ID

        function showRightDiv() {
            rightDiv.classList.toggle('hidden');
        }

        $('.owl-carousel').owlCarousel({
            items: 4,
            loop: true,
            margin: 10,
            dots: false,
            nav: true,
            responsive: {
                0: {
                    items: 1
                },
                600: {
                    items: 3
                },
                1000: {
                    items: 4
                }
            }
        })


        var infoIcon = document.getElementById("info_icon");
        var modal = document.getElementById("myModal");
        var closeBtn = document.querySelector(".close");

        infoIcon.addEventListener('click', function (event) {
            event.preventDefault();
            modal.classList.add('active');
        });

        closeBtn.addEventListener('click', function () {
            modal.classList.remove('active');
        });


        function clickShow(button) {
            const targetBtn = button.getAttribute('data-target');
            const showDiv = document.getElementById(targetBtn);

            if (showDiv.style.display === 'block') {
                showDiv.style.display = 'none';
                button.textContent = '點我出現';
            } else {
                document.querySelectorAll("[id^='show']").forEach(div => {
                    div.style.display = "none";
                })
                showDiv.style.display = 'block';
                button.textContent = 'close';
            }
            // 获取所有左侧按钮并更改非当前点击按钮的文本为 "点我出现"
            const allButtons = document.querySelectorAll("[id^='clickme']");
            allButtons.forEach(btn => {
                if (btn !== button) {
                    btn.textContent = '点我出现';
                }
            });
        }




        $(document).ready(function () {
            var isContentHidden = true;
            var originalHeight = $(document).height();
            var bottomHeight = $('.bottom').height();

            $("#controller").click(function () {
                if (isContentHidden) {
                    var contentHeight = $("#hiddenContent").height();
                    $("#hiddenContent").slideDown();

                    // 暂存原始滚动位置
                    var originalScrollPos = $(window).scrollTop();

                    // 设置页面高度为原始高度加上内容高度的一半
                    $('body').css('height', originalHeight + contentHeight / 2);

                    // 滚动页面到底部
                    window.scrollTo({
                        top: originalScrollPos + contentHeight / 2,
                        behavior: 'smooth'
                    });
                } else {
                    // 恢复原始网页高度
                    $('body').css('height', originalHeight);

                    // 滚动页面到顶部，同时隐藏内容
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });

                    $("#hiddenContent").slideUp();
                }
                isContentHidden = !isContentHidden;
            });
        });
        $(document).ready(function () {
            $('.hoverTest').each(function () {
                var $images = $(this).find('img');
                var imageCount = $images.length;
                var currentIndex = 0;
                var timer; // 定时器变量

                function showImage(index) {
                    $images.css('opacity', '0'); // 隐藏所有图片
                    $images.eq(index).css('opacity', '1'); // 显示特定索引的图片
                }

                function nextImage() {
                    currentIndex = (currentIndex + 1) % imageCount;
                    showImage(currentIndex);
                }


                $(this).on('mouseenter', function () {
                    // 当鼠标进入 .hoverTest 区域时
                    showImage(1); // 显示第二张图片
                    timer = setTimeout(function () {
                        nextImage(); // 三秒后显示下一张图片
                        timer = setInterval(nextImage, 3000); // 每三秒切换一次图片
                    }, 2000);
                }).on('mouseleave', function () {
                    // 当鼠标离开 .hoverTest 区域时
                    clearTimeout(timer); // 清除定时器
                    $images.css('opacity', '1');
                });
            })

        });



        var islikeAndRecVisible = false;

        function clickChange() {
            const likeAndRec = document.getElementById('likeAndRec');
            const searchBlock = document.getElementById('searchBlock');
            const button = document.getElementById("changeToSearch");

            islikeAndRecVisible = !islikeAndRecVisible

            if (islikeAndRecVisible) {
                likeAndRec.style.transform = 'rotateY(180deg)';
                searchBlock.style.transform = 'rotateY(0deg)';
                button.textContent = "收藏與推薦";
            } else {
                likeAndRec.style.transform = 'rotateY(0deg)';
                searchBlock.style.transform = 'rotateY(180deg)';
                button.textContent = "切換搜尋";
            }

        }
        function saveTabState(tabId) {
            var tabs = document.getElementsByClassName('tab-pane');
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].style.display = 'none';
            }

            var tab = document.getElementById(tabId);
            tab.style.display = 'block';
        }

        // var isSearchVisible = false;
        // function clickChange() {
        //     var likeAndRec = $(".likeAndRec");
        //     var searchBlock = $(".searchBlock");

        //     isSearchVisible = !isSearchVisible;


        //     if (isSearchVisible) {
        //         likeAndRec.fadeOut(200);
        //         searchBlock.fadeIn(200);
        //         $("#changeToSearch").text("收藏與推薦");
        //     } else {
        //         searchBlock.fadeOut(200);
        //         likeAndRec.fadeIn(200);
        //         $("#changeToSearch").text("切換搜尋");
        //     }
        // }

        var isLikeVisible = false;

        function openLikeBtn() {

            var openlike = $('.openlike');

            isLikeVisible = !isLikeVisible

            if (isLikeVisible) {
                openlike.animate({
                    height: "show"
                }, 500);
            } else {
                openlike.animate({
                    height: "hide"
                }, 500);
            }
        }

        var isRecVisible = false;
        function openRecBtn() {

            var openRec = $('.openRec');

            isRecVisible = !isRecVisible

            if (isRecVisible) {
                openRec.animate({
                    height: "show"
                }, 500);
            } else {
                openRec.animate({
                    height: "hide"
                }, 300);
            }
        }
    </script>
</body>

</html>