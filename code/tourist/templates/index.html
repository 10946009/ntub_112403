{% extends 'base.html' %}
{% block title %}首頁{% endblock %}
{% block content %}
<link rel="stylesheet" href="../static/owl/owl.carousel.min.css">
<link rel="stylesheet" href="../static/css/index.css">
<style>
  .owl-carousel .owl-nav button.owl-next,
  .owl-carousel .owl-nav button.owl-prev {
      color: white;
      height: 50px;
      width: 30px;
      background: rgba(0, 0, 0, 0.5);
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      transition: background 0.3s;
  }
</style>
{% endblock %}


{% block body %}
  <div id="main" class="row" style="z-index: 2;width: 90%;margin: 20px auto;margin-top: 0;padding: 20px 0;">
    <!-- <div class="hideme" style="position: relative;">
      <div class="incomplete-circle "></div>
    </div> -->
    <div class="col-md-3 hidemehottoright">
      <div>
        <h1 class="hot_spot_title" style="font-family: HanyiSentyTea Regular;">HOT&ensp;&ensp;SPOT</h1>
        <h3 class="hot_spot_title">熱&ensp;門&ensp;景&ensp;點</h3>
      </div>
      <div class="hot_spot_content">
        掌握台北最熱門的景點，讓你無須煩惱去哪裡～趣放假帶你趣遊 !
      </div>
      <a class="explore " href="/attraction_details">
        <div class="explorea">VIEW ALL</div>
      </a>
    </div>

    <div class="col-md-9 hidemehottoleft">
      <div class="owl-carousel owl-theme owl_adjust">
        {% for item in hot_result %}
          <div class="item">
            <div class="imgcontainer">
              <div class="slideshow-container" id="imageContainer" onmouseover="startSlideshow(this)" onmouseout="stopSlideShow(this)">
                {% for  img in item.imglist %}
                {% if forloop.counter == 1 %} 
                <img src="/static/images/attractions/{{img}}" class="changeImg changeImg_show">
                {% else %}
                <img src="/static/images/attractions/{{img}}" class="changeImg">
                {% endif %}
                {% endfor %}
              </div>
              <a class="fa-solid fa-circle-info info_icon_left" onclick="clickInfo(item.id)"></a>
              {% if item.is_favorite == "1" %}
              <button class="fa-solid fa-heart heart_icon active_heart" data-isfavorite="{{item.is_favorite}}"
                data-id="{{item.id}}" data-type="/add_favorite/"></button>
              {% else %}
              <button class="fa-solid fa-heart heart_icon" data-isfavorite="{{item.is_favorite}}"
                data-id="{{item.id}}" data-type="/add_favorite/"></button>
              {% endif %}
            </div>
            <div class="carousel_txt">
              <h4 class="c_title">
                {{item.a_name}}
              </h4>
              <div class="rating" style="text-align: center;">
                {% for i in "12345" %}
                  {% if i|add:0 <= item.rating %} 
                    <i class="fa-solid fa-star" style="color:rgb(226, 185, 2);"></i>
                  {% else %}
                    <i class="fa-solid fa-star" style="color:rgb(185, 184, 184);"></i>
                  {% endif %}
                {% endfor %}
                <br>
                <span id="selectedRating">{{item.rating}} / 5 ({{ item.rating_total }}則) </span>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <div id="container" class="row" style="clear: both;width: 90%;margin: 0 auto;">
    <div class="col-md-9 order-md-1 order-2 hidemehottoright">
      <div class="owl-carousel owl-theme">
        {% for ct in top_hot_travel %}
          <div class="item hot_spot_block ">
            <div class="heart_icon_img">
              <div class="slideshow-container" id="imageContainer" onmouseover="startSlideshow(this)" onmouseout="stopSlideShow(this)">
                {% for  img in ct.imglist %}
                {% if forloop.counter == 1 %} 
                <img src="/static/images/attractions/{{img.a__place_id}}_0.jpg" class="changeImg changeImg_show">
                {% else %}
                <img src="/static/images/attractions/{{img.a__place_id}}_0.jpg" class="changeImg">
                {% endif %}
                {%empty%}
                <img src="/static/images/attractions/default_0.jpg" class="changeImg changeImg_show">
                {% endfor %}
              </div>
              <!-- 加入最愛 -->
              {% if ct.is_favorite == "1" %}
                <button class="fa-solid fa-heart heart_icon active_heart" data-isfavorite="{{ct.is_favorite}}"
                  data-id="{{ct.id}}" data-type="/add_travel_favorite/"></button>
              {% else %}
                <button class="fa-solid fa-heart heart_icon" data-isfavorite="{{ct.is_favorite}}"
                  data-id="{{ct.id}}" data-type="/add_travel_favorite/"></button>
              {% endif %}
            </div>
            <div class="spot_txt">
              <h4 class="c_title">
                {{ ct.ct_name }}
              </h4>
              <h5>
                作者：{{ ct.u_id.username }}
              </h5>
              <p>收藏人數：{{ ct.like }}</p>
              {% comment %} <button class="btn btn-warning spot_data_btn more_data" id="more_data">詳細資料</button> {% endcomment %}
              <a href="/travel_detail/{{ ct.id }}" class="btn btn-warning spot_data_btn more_data" id="more_data">詳細資料</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="col-md-3 order-md-2 order-1 hidemehottoleft">
      <div class="hot_spotTxt">
        <h1 class="hot_spot_title" style="font-family: HanyiSentyTea Regular;">HOT&ensp;JOURNEY</h1>
        <h3 class="hot_spot_title">熱&ensp;門&ensp;行&ensp;程</h3>
      </div>
      <div class="hot_spot_content">
        每個行程都充滿新奇的體驗、獨特的玩法～趣放假，帶您展開不同的冒險！
      </div>
      <a class="more_span"  href="/share/">
        <div class="more_a">MORE</div>
      </a>
    </div>
  </div>
  <!-- 彈跳視窗 -->
  <div class="modal" id="myModal">
    <div class="modal-content_att_info">
      <div class="close_att_info"><span class="fa-solid fa-xmark " onclick="clickClose()"></span></div>
        <div id = "changeInfo">
          {% include "attractions_info.html" %}
        </div>
    </div>
  </div>
  <div class="rellax rellax1" data-rellax-speed="5" style="left: -15px;">
      <i class="fa-solid fa-circle circle1" style="font-size: 36px;color: #E3BCB5;"></i>
  </div>
  <div class="rellax rellax2" data-rellax-speed="6" style="left: calc(100vw / 4);">
      <i class="fa-solid fa-circle circle2" style="font-size: 60px;color: #EBC1A8;"></i>
  </div>
  <div class="rellax rellax3" data-rellax-speed="1" style="right: calc(100vw / 4);">
      <i class="fa-solid fa-circle circle3" style="font-size: 60px;color: #E7ADAC;"></i>
  </div>
  <div class="rellax rellax4" data-rellax-speed="3" style="right: -10px;">
      <i class="fa-solid fa-circle circle4" style="font-size: 120px;color: rgb(199, 171, 245);"></i>
  </div>
{% endblock body %}

{% block content_script %}
<script src="../static/js/index.js"></script>
<script src="../static/js/addFavorite.js"></script>
<script src="../static/js/owl.carousel.min.js"></script>
<script src="../static/js/indexOwl.js"></script>
<script src="https://cdn.jsdelivr.net/gh/dixonandmoe/rellax@master/rellax.min.js"></script>
<script>
  indexOwl();
  
  var rellax = new Rellax('.rellax', {
    speed: -2,
    center: false,
    wrapper: null,
    round: true,
    vertical: true,
    horizontal: false
  });
</script>

{% endblock %}

</html>