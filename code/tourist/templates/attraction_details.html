{% extends 'base.html' %}
{% block title %}景點資訊{% endblock %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="../static/css/bootstrap2023.css">
<link rel="stylesheet" href="../static/css/att.css">
<link rel="stylesheet" href="../static/css/comment.css">
<!-- <link rel="stylesheet" href="../static/css/all.css"> -->
<link rel="stylesheet" href="../static/js/createT.js">
<link rel="stylesheet" href="../static/js/attraction_details.js">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="../static/js/jquery-3.7.0.min.js"></script>
<script src="../static/js/bootstrap.js"></script>
{% endblock %}

{% block body %}
{% comment %} <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">趣放假
            <img src="../static/images/logo_icon.png" width="20px" style="margin-left: 5px">
        </a>
        <button class="navbar-toggler me-auto" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/">首頁</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/create">建立行程</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/history">我的行程</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/attraction_details">搜尋景點</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/favorite">我的收藏</a>
                </li>
            </ul>
        </div>
        <div>
            <ul class="name_ul">
                <li class="nav-item dropdown name_li" style="list-style-type: none;">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Username</a>
                    <ul class="dropdown-menu">
                        <li>
                            <a class="dropdown-item" href="#">Setting</a>
                        </li>
                        <li>
                            <a class="dropdown-item" href="#">Log out</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav> {% endcomment %}
<!-- <div style="width: 100%;
                height: 40px;
                background-color: rgb(220, 220, 220)">
    <nav class="sec">
        <ul class="sec-ul">
            <li>
                <a href="/">
                    <img class="home" src="/static/images/home.png" alt="home">
                </a>
            </li>
            <li>
                <a href="/attraction_details">景點資訊</a>
            </li>
            <li>
                <a href="/services">服務</a>
            </li>
            <li>
                <a href="/contact">聯繫我們</a>
            </li>
        </ul>
    </nav>
</div> -->
<!-- <div class="row" style="padding:15px;">
    <div class="col-6 col-s-12 Att_search">
        <div class="att">
            <img class="taipei-att" src="../static/images/search.png" alt="att" style="width:50px;height:50px">
            <h2 style="margin-top:5px;font-size:32px;display: flex;color: rgb(10, 80, 150)">搜尋景點</h2>
        </div>
        <div class="search_field">
            <form class="d-flex" method="post" role="search" action="{% url 'search_results' %}">
                {% csrf_token %}
                <input class="search_tool" type="search" placeholder="請輸入要搜尋的景點" name="search_att">
                <button class="search_btn" type="submit">搜尋</button>
            </form>
        </div>

        {% for item in search_list %}
        <div class="aside" onclick="showRightBox(this)" data-a-Id="{{ item.id }}">
            <div class="row">
                <div class="col-8">
                    <h5>{{ item.a_name }}</h5>
                    <div class="rating">
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                    </div>

                    <div class="rating" id="ratingStars">
                        <span class="rating-star" onclick="setRating(1)">&#9733;</span>
                        <span class="rating-star" onclick="setRating(2)">&#9733;</span>
                        <span class="rating-star" onclick="setRating(3)">&#9733;</span>
                        <span class="rating-star" onclick="setRating(4)">&#9733;</span>
                        <span class="rating-star" onclick="setRating(5)">&#9733;</span>
                    </div>

                    <h6 style="margin-top:5px;">
                        地址：<span id="list-address">{{ item.address }}</span>
                    </h6>
                    <h6 style="margin-top:5px;">
                        綜合評分： <span id="list-selectedRating">{{ item.rating }}</span> / 5 (2.1萬)
                    </h6>
                    <h6>
                        營業時間：<span>24小時營業</span>
                    </h6>
                    <form action="/attraction_details/{{item.id}}" method="POST" name="clickfavorite"
                        id="clickfavorite">
                        {% csrf_token %}
                        <input type="submit" name="submitfavorite" id="submitfavorite" value="加入收藏" />
                    </form>
                    {% comment %}
                    <div>
                        <a href="/attraction_details/{{user}}/{{item.id}}">加入收藏</a>
                    </div> {% endcomment %}
                    <h2>What?</h2>
                    <p>Chania is a city on the island of Crete.</p>
                    <h2>Where?</h2>
                    <p>Crete is a Greek island in the Mediterranean Sea.</p>
                    <h2>How?</h2>
                    <p>You can reach Chania airport from all over Europe.</p>
                </div>
                <div class="col-4 img_field">
                    <img src="../static/images/twotwoeight.jpeg" class="Att_img" alt="two">
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="col-6 col-s-12 Att_info" id="rightbox" style="margin-top:50px;">
        <div class="aside">
            <img src="../static/images/x.png" class="img_x" id="closeBtn" onclick="hideRightBox()">
            <h3 style="color: rgb(172, 78, 1)" id="attractions-detail-name"></h3>
            <div class="rating" style="margin-bottom: 10px;">
                <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                <span class="rating-star">&#9733;</span>
                <span id="selectedRating"></span> / 5 (6.3萬)
            </div>
            <div style="display: flex;justify-content: center;align-items: center;height: auto; height: 100%;">
                <img src="/static/images/zoo.jpeg" alt="photo" class="Att_img">
            </div>
            <div class="Att_detail">
                <h6 id="attractions-detail-address">
                    地址：116台北市文山區新光路二段30號
                </h6>
                <h6 id="attractions-detail-phone">
                    電話：02－2938－2300
                </h6>
                <h6>
                    營業時間： <span style="color: red;">已打烊</span> <span style="color: rgb(21, 81, 140);">
                        *開始營業時間：9:00</span>
                </h6>
                <h6>
                    建議停留時間：
                </h6>
                <h6>旺季月份：</h6>
            </div>
            <hr>
            <h5>
                人潮資訊：
            </h5>
            <div style="display: flex;justify-content: center;align-items: center;height: auto">
                <img src="/static/images/humum.jpg" alt="photo" class="Att_img">
            </div>
            <hr>
            <h5>
                景點評論：
            </h5>
            <div class="comment">
                <div class="avatar">
                    <img src="/static/images/head.png" alt="User Avatar">
                </div>
                <div class="comment-content">
                    <h6 class="username">
                        李
                    </h6>
                    <div class="rating">
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                    </div>
                    <p class="comment-text">
                        天氣冷來到動物園，動物們顯得心情不好，跟人類一樣也會冷到不想到，看到最多的是背影跟屁股，也是一種難得的經驗。
                        <br>
                        <span style="color:gray;font-size: 12px; font-style: italic;">Posted on May 28,
                            2033</span>
                    </p>
                </div>
            </div>
            <div class="comment">
                <div class="avatar">
                    <img src="/static/images/head.png" alt="User Avatar">
                </div>
                <div class="comment-content">
                    <h6 class="username">
                        sun
                    </h6>
                    <div class="rating">
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                    </div>
                    <p class="comment-text">
                        帶小孩來看動物很棒！可以玩一整天！廁所很多很方便,用餐座位如果能再多一些就好了!麥當勞大排長龍實在太誇張！希望能增設其他餐廳或便利商店~
                        <br>
                        <span style="color:gray;font-size: 12px; font-style: italic;">Posted on May 28,
                            2023</span>
                    </p>
                </div>
            </div>
            <div class="comment">
                <div class="avatar">
                    <img src="/static/images/head.png" alt="User Avatar">
                </div>
                <div class="comment-content">
                    <h6 class="username">
                        李+0
                    </h6>
                    <div class="rating">
                        <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                        <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                        <span class="rating-star">&#9733;</span>
                    </div>
                    <p class="comment-text">
                        我實在越來越覺得動物園越來越差，維修的東西擴建的項目越來越多，但都沒有東西完成！太誇張了
                        <br>
                        <span style="color:gray;font-size: 12px; font-style: italic;">Posted on May 28,
                            2023</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

</div> -->


<!-- <div class="row">
    <div class="col-2"></div>
    <div class="col-8 ">
        <div class="att">
            <img class="taipei-att" src="../static/images/search.png" alt="att" style="width:50px;height:50px">
            <h2 style="margin-top:5px;font-size:32px;display: flex;color: rgb(10, 80, 150)">搜尋景點</h2>
        </div>
        <div class="search_field">
            <form class="d-flex" method="post" role="search" action="{% url 'search_results' %}">
                {% csrf_token %}
                <input class="search_tool" type="search" placeholder="請輸入要搜尋的景點" name="search_att">
                <button class="search_btn" type="submit">搜尋</button>
            </form>
        </div>
        {% for item in search_list %}
        <div class="row All_Att" style="background-color: rgb(127, 174, 196); margin-top: 30px;">
            <div class="col-4">
                <div class="Att_photo">
                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                                class="active" aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src=" ../static/images/beitou.jpeg" class="d-block w-100" alt="..."
                                    onmouseover="inner()" onmouseout="out()">
                            </div>
                            <div class="carousel-item">
                                <img src="../static/images/Datong.jpeg" class="d-block w-100" alt="..."
                                    onmouseover="inner()" onmouseout="out()">
                            </div>
                            <div class="carousel-item">
                                <img src="../static/images/chang.jpeg" class="d-block w-100" alt="..."
                                    onmouseover="inner()" onmouseout="out()">
                            </div>
                        </div>
                        <button class="carousel-control-prev" id="tips1" type="button"
                            data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" id="tips" type="button"
                            data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-8" style="margin-top: 15px;">
                <h5>{{ item.a_name }}</h5>
                <div class="rating">
                    <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                    <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                    <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                    <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                    <span class="rating-star">&#9733;</span>
                </div>
                <h6 style="margin-top:5px;">
                    地址：<span id="list-address">{{ item.address }}</span>
                </h6>
                <h6 style="margin-top:5px;">
                    綜合評分： <span id="list-selectedRating">{{ item.rating }}</span> / 5 (2.1萬)
                </h6>
                <h6>
                    營業時間：<span>24小時營業</span>
                </h6>
                <form action="/attraction_details/{{item.id}}" method="POST" name="clickfavorite" id="clickfavorite">
                    {% csrf_token %}
                    <input type="submit" name="submitfavorite" id="submitfavorite" value="加入收藏" />
                </form>
                {% comment %}
                <div>
                    <a href="/attraction_details/{{user}}/{{item.id}}">加入收藏</a>
                </div> {% endcomment %}
            </div>
        </div>
        {% endfor %}
    </div>
</div> -->


<div class="row search_info">
    <!-- <div class="col-1"></div> -->
    <div class="col-9">
        <!-- <div class="att">
            <img class="taipei-att" src="../static/images/search.png" alt="att" style="width:50px;height:50px">
            <h2 style="margin-top:5px;font-size:32px;display: flex;color: rgb(10, 80, 150)">搜尋景點</h2>
        </div> -->
        <!-- <div class="search_field" style=" position: relative; 
        display: inline-block; width: 100%;">
            <form class="d-flex" method="post" role="search" action="{% url 'search_results' %}">
                {% csrf_token %}
                <i class="fa-solid fa-magnifying-glass icon_search" style=" position: absolute; 			
                    left: 12px;
                    top: calc(50% - 0.5em);"></i>
                <input class="search_tool" style="padding-left: 35px;" type="search" placeholder="請輸入要搜尋的景點"
                    name="search_att">
                <button class="search_btn" style="width:8% ; border-radius: 60px; margin-right: 10px;"
                    type="submit">篩選條件</button>
                <button class="search_btn" type="submit">搜尋</button>
            </form>
        </div> -->
        <form autocomplete="off" action="/action_page.php">
            <div class="autocomplete" style="width:50%; margin-bottom:20px;">
                <input id="myInput" type="text" name="myCountry" placeholder="搜尋景點...">
            </div>
            <input class="search_btn" type="submit">
        </form>
    </div>
</div>

<div class="row detail_info">
    <!-- 左半邊個別景點的部分 -->
    <div class="col-6">
        {% for item in search_list %}
        <div class="row All_Att" style=" cursor: pointer;">
            <div class="col-5">
                <div class="Att_photo">
                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                                class="active" aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                                aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src=" ../static/images/beitou.jpeg" class="d-block w-100" alt="..."
                                    onmouseover="inner()" onmouseout="out()">
                            </div>
                            <div class="carousel-item">
                                <img src="../static/images/Datong.jpeg" class="d-block w-100" alt="..."
                                    onmouseover="inner()" onmouseout="out()">
                            </div>
                            <div class="carousel-item">
                                <img src="../static/images/chang.jpeg" class="d-block w-100" alt="..."
                                    onmouseover="inner()" onmouseout="out()">
                            </div>
                        </div>
                        <button class="carousel-control-prev" id="tips1" type="button"
                            data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" id="tips" type="button"
                            data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-7" style="margin-top: 5px;">
                <h5>{{ item.a_name }}</h5>
                <div class="rating">
                    <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                    <span class="rating-star" style="color:rgb(241, 226, 62) ;">&#9733;</span>
                    <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                    <span class="rating-star" style="color: rgb(241, 226, 62);">&#9733;</span>
                    <span class="rating-star">&#9733;</span>
                </div>
                <h6 style="margin-top:5px;">
                    地址：<span id="list-address">{{ item.address }}</span>
                </h6>
                <h6 style="margin-top:5px;">
                    綜合評分： <span id="list-selectedRating">{{ item.rating }}</span> / 5 (2.1萬)
                </h6>
                <h6>
                    營業時間：<span>24小時營業</span>
                </h6>
                <form action="/attraction_details/{{item.id}}" method="POST" name="clickfavorite" id="clickfavorite">
                    {% csrf_token %}
                    <input type="submit" name="submitfavorite" id="submitfavorite" value="加入收藏" />
                </form>
                {% comment %}
                <div>
                    <a href="/attraction_details/{{user}}/{{item.id}}">加入收藏</a>
                </div> {% endcomment %}
            </div>
        </div>
        <hr>
        {% endfor %}
    </div>
    <!-- 打算右邊放詳細景點的位置，讓使用者方便找位置 -->
    <div class="col-5">
        <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3613.409766414629!2d121.51933148229064!3d25.087986820492432!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442aeb1c4fdaf05%3A0xe7c26dbe86e7f929!2z5aOr5p6X5aSc5biC!5e0!3m2!1szh-TW!2stw!4v1690466715769!5m2!1szh-TW!2stw"
            width="700" height="600" style="border:0;" allowfullscreen="" loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
</div>



<!-- <div class="col-6">
    <div class=detail_box id="rightbox">
        <div class="close">
            <div class="img_x">
                <img src="/static/images/x.png" id="closeBtn" onclick="hideRightBox()">
            </div>
        </div>
    </div>
</div> -->
<!-- <script>
        function setRating(rating) {
            document.getElementById("selectedRating").textContent = rating;
            var stars = document.getElementsByClassName("rating-star");
            for (var i = 0; i < stars.length; i++) {
                if (i < rating) {
                    stars[i].classList.add("selected");
                } else {
                    stars[i].classList.remove("selected");
                }
            }
        }
    </script> -->
<script>
    // function inner() {
    //     document.getElementById("tips").style.display = "inline-block";
    //     document.getElementById("tips1").style.display = "inline-block";
    // }
    // function out() {
    //     document.getElementById("tips").style.display = "none";
    //     document.getElementById("tips1").style.display = "none";
    // }


    function showRightBox(element) {
        var aId = $(element).data('aId');
        $.ajax({
            url: '',
            type: 'GET',
            data: {
                a_id: aId
            },
            success: function (response) {
                var rightBox = document.getElementById("rightbox");
                rightBox.style.display = "block";
                console.log(aId);

                var attractions = response;

                // 將資料放進網頁中

                var attractionsDetailName = document.getElementById('attractions-detail-name');
                var attractionsDetailAddress = document.getElementById('attractions-detail-address');
                var attractionsDetailPhone = document.getElementById('attractions-detail-phone');
                var attractionsDetailRating = document.getElementById('selectedRating');

                attractionsDetailName.textContent = attractions.a_name;
                attractionsDetailAddress.textContent = "地址：" + attractions.address;
                attractionsDetailPhone.textContent = "電話：" + attractions.phone;
                attractionsDetailRating.textContent = attractions.rating;
            },
            error: function (xhr, status, error) {
                // 请求失败时的处理
                console.log("AJAX请求失败: " + error);
            }
        });
    }
    {% comment %} var rightBox = document.getElementById("rightbox");
    rightBox.style.display = "block"; {% endcomment %}

    function hideRightBox() {
        var rightBox = document.getElementById("rightbox");
        rightBox.style.display = "none";
    }

    // 取得選擇後的景點回傳的值
    {% comment %}
    $.ajax({
        url: '',  // 替换为你的视图函数 URL
        type: 'GET',
        success: function (response) {
            var attractions = response;

            // 將資料放進網頁中

            var attractionsDetailName = document.getElementById('attractions-detail-name');
            attractionsDetailName.textContent = attractions.a_name;
            console.log(attractionsDetailName);
        }
    }); {% endcomment %}


    function autocomplete(inp, arr) {
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function (e) {
            var a, b, i, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    /*create a DIV element for each matching element:*/
                    b = document.createElement("DIV");
                    /*make the matching letters bold:*/
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    /*insert a input field that will hold the current array item's value:*/
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    /*execute a function when someone clicks on the item value (DIV element):*/
                    b.addEventListener("click", function (e) {
                        /*insert the value for the autocomplete text field:*/
                        inp.value = this.getElementsByTagName("input")[0].value;
                        /*close the list of autocompleted values,
                        (or any other open lists of autocompleted values:*/
                        closeAllLists();
                    });
                    a.appendChild(b);
                }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function (e) {
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                    x[i].parentNode.removeChild(x[i]);
                }
            }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }

    /*An array containing all the country names in the world:*/
    var countries = ["Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Anguilla", "Antigua & Barbuda", "Argentina", "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bermuda", "Bhutan", "Bolivia", "Bosnia & Herzegovina", "Botswana", "Brazil", "British Virgin Islands", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Cayman Islands", "Central Arfrican Republic", "Chad", "Chile", "China", "Colombia", "Congo", "Cook Islands", "Costa Rica", "Cote D Ivoire", "Croatia", "Cuba", "Curacao", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Falkland Islands", "Faroe Islands", "Fiji", "Finland", "France", "French Polynesia", "French West Indies", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Gibraltar", "Greece", "Greenland", "Grenada", "Guam", "Guatemala", "Guernsey", "Guinea", "Guinea Bissau", "Guyana", "Haiti", "Honduras", "Hong Kong", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Isle of Man", "Israel", "Italy", "Jamaica", "Japan", "Jersey", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Kosovo", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Macau", "Macedonia", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Montserrat", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauro", "Nepal", "Netherlands", "Netherlands Antilles", "New Caledonia", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Korea", "Norway", "Oman", "Pakistan", "Palau", "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Puerto Rico", "Qatar", "Reunion", "Romania", "Russia", "Rwanda", "Saint Pierre & Miquelon", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Korea", "South Sudan", "Spain", "Sri Lanka", "St Kitts & Nevis", "St Lucia", "St Vincent", "Sudan", "Suriname", "Swaziland", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor L'Este", "Togo", "Tonga", "Trinidad & Tobago", "Tunisia", "Turkey", "Turkmenistan", "Turks & Caicos", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States of America", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam", "Virgin Islands (US)", "Yemen", "Zambia", "Zimbabwe"];

    /*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
    autocomplete(document.getElementById("myInput"), countries);


</script>
{% endblock body %}