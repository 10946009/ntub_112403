{% extends 'base.html' %}

{% block title %}行程詳細頁面{% endblock %}
{% block content %}
<link rel="stylesheet" href="../static/css/travel_detail.css">
{% comment %} CSS放這~~ {% endcomment %}
<style>
<style>
body {
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
    width: 100%;
    margin: 80px auto 0;
    display:flex;
    flex-direction: column;
    max-width: 1200px;
}

header {
    display: flex;
    justify-content: space-between;
    width: 100%;
    align-items: center;
    padding: 10px;
}

.title-buttons {
    display: flex;
    align-items: center;
}

.like-button, .share-button {
    margin-left: 10px;
}

.page-title {
    font-size: 20px;
    font-weight: bold;
    margin: 0;
    margin-right: auto;
}

.title-info-container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    align-items: center;
    padding: 10px;
}       

.title-info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-right: auto;
}

.comment {
    margin-left: 10px;
}
.image-description {
    margin-top: 10px;
    text-align: left;
}

.image-description h3 {
    font-size: 20px;
    font-weight: bold;
    margin: 0;
}

.image-description p {
    font-size: 16px;
    margin: 0;
}
.itinerary {
  margin: 20px 0;
}
.review-container{
    margin: 80px auto;
    max-width: 1000px;
}
.review-container .btn-style-1 {
    background-color: ;
    border-radius: 50px;
    padding: 0.5rem 1rem;
    border: 2px solid #000;
    font-weight: bold;
  }
  
  .review-container .btn-style-2 {
    background-color: #fff;
    border-radius: 50px;
    padding: 0.5rem 1rem;
    border: 2px solid #e6e6e6;
    font-weight: bold;
  }
  
  .review-container .review {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  .review-container .review-wrap {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  
  .review-container .tag {
    border: 1px solid #5a9bd5;
    padding: 5px 10px;
    border-radius: 50px;
  }
  
  .review-container .tag.active {
    border: 1px solid rgba(90, 155, 213, 0.2);
    background-color: rgba(90, 155, 213, 0.2);
  }
  
  .review-container .review-content {
    margin: 2rem 1rem;
    padding: 1rem;
    border-bottom: 1px solid #eee;
  }
  
  .review-container .head {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .review-container .head .info{
      display: flex;
      justify-content: center;
      align-items: center;
  }
  
  .review-container .user-name {
    font-weight: bold;
  }
  
  .review-container .user-img {
    height: 50px;
    width: 50px;
    border-radius: 50%;
    margin-right: 1rem;
  }
  
  .review-container .review-img {
    width: 100px;
    height: 100px;
    overflow: hidden;
  }
  
  .review-container .review-img img {
      height: 100%;
      width: auto;
  }
  .review-container .title {
    padding: 0;
    margin: 0;
  }
  .title-buttons .share-button,
  .title-buttons .like-button {
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      transition: transform 0.3s ease;
  }
  
  .title-buttons .share-button:hover,
  .title-buttons .like-button:hover {
      transform: scale(1.2);
  }

  .main-container {
    display: flex;
  }

  .main-container img {
    width: 100%;
    height: 100%;
  }

  .main-container .main-content {
    width: 720px;
    height: 480px;
  }

  .main-container .sub-content {
    width: calc(100% - 720px);
    margin-left: 1rem;
    height: 480px;
    box-sizing: border-box;
  }

  .main-container .sub-item {
    margin-bottom: 1rem;
    height: calc(50% - 0.5rem);

  }
  .title-buttons .share-button,
  .title-buttons .like-button {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    transition: transform 0.3s ease;
    font-size: 20px;
  }

  .title-buttons .share-button:hover,
  .title-buttons .like-button:hover {
    transform: scale(1.2);
  }
  .fa-regular.fa-thumbs-up {
    font-size: 20px;
    transition: transform 0.3s ease;
  }

  .fa-regular.fa-thumbs-up:hover {
    transform: scale(1.2);
  }
  .dayDiv {
    display: block;
    width: 80px;
    height: 40px;
    line-height: 40px;
    border: 1px solid rgba(128, 128, 128, 0.46);
    border-top-right-radius: 20px;
    border-top-left-radius: 20px;
    text-align: center;
    cursor: pointer;
    margin-top: 10px;
}

.dayContent {
    width: 100%;
    padding: 10px;
    border: 1px solid black;
    overflow-x: auto;
    display: flex;
    flex-wrap: wrap;
}

.car_icon {
    height: 250px;
    line-height: 250px;
    margin: 120px 5px 0; /* Adjust the top margin value to move it down */
    cursor: pointer;
}

.dayContentIntro {
    width: 250px;
    height: 250px;
    padding: 10px 5px;
    border: 1px solid black;
    border-radius: 30px;
    margin-bottom: 10px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.avatar img {
  border-radius: 50%;
}
#cancel-success-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
  background-color: white;
  border: 1px solid #ccc;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 999;
}

#cancel-success-modal h3 {
  color: #333;
}

#cancel-success-modal button {
  margin-top: 10px;
  padding: 8px 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
</style>
{% endblock %}



{% block body %}
{% comment %} 內容在這~~~ {% endcomment %}
<div class="container">
<header>
  <h1 class="page-title">{{ct_detail.ct_name}}來自台北的千島湖和坪林茶園</h1>
  <div class="title-buttons">
    <div class="share-button" id="share-button"><i class="fa-solid fa-arrow-up-from-bracket"></i></div>
    <div class="like-button" id="like-button"><i class="fa-solid fa-heart"></i></div>
</div>
</header>
<div class="title-info-container">
  <div class="title-info">
      <p class="provider">提供者：{{ct_detail.u.username}}</p>
      <p class="reviews-count">有幾則評論：XX</p>
  </div>
</div>
<section class="main-container">
<div class="main-content">
  <img src="../static/images/attractions/{{ct_detail.get_attractions_picture.0.a__place_id}}_0.jpg">
</div>
<div class="sub-content">
  <div class="sub-item">
    <img src="https://via.placeholder.com/720x480">
  </div>
  <div class="sub-item">
    <img src="https://via.placeholder.com/720x480">
  </div>
</div>
</section>
<div class="image-description">
  <h3>關於</h3>
  <p>{{ct_detail.detail}}在京都隱藏的寶石的自行車探索中，您將擊敗人群並參觀更加寧靜的城市。從禪宗花園到被聯合國教科文組織列為金閣寺的寺廟，這裡是您在戶外活動中度過美好時光的完美方式。您還將從導遊那裡了解日本的歷史和文化。而且你可以打包燈，因為提供了可折疊的自行車和頭盔。</p>
</div>
<div class="dayDoneSection">
  <div class="dayDone">
      <div class="dayDoneBtn">
          <div class="dayDiv" data-day="1" style="float: left;">
              <i class="fa-regular fa-calendar"></i> DAY 1
          </div>
          <div class="dayDiv" data-day="2" style="float: left;">
              <i class="fa-regular fa-calendar"></i> DAY 2
          </div>
      </div>
<div id="content1" style="display: none;">
    <div class="dayContent">
        <div
            style="height: 250px;display: flex;justify-content: center;align-items: center;align-content: center;">
            起始<br>位置</div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
        </div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
        </div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
        </div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
        </div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
        </div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
        </div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
    </div>
</div>
<div id="content2" style="display: none;">
    <div class="dayContent">
        <div
            style="height: 250px;display: flex;justify-content: center;align-items: center;align-content: center;">
            起始<br>位置</div>
        <a href="" style="text-decoration: none;color: black;">
            <i class="fa-solid fa-car-side car_icon"></i>
        </a>
        <div class="dayContentIntro">
            <p>景點名稱</p>
            <p>營業時間</p>
            <p>停留時間</p>
                       </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="review-container">
  <section>
    <div class="row">
      <h5 style="font-size: 24px;">
          <i class="fa-solid fa-pen" style="color: gray;"></i>
          評論
      </h5>
    </div>
  <div>
    <button class="btn-style-1">發表評論</button>
  </div>
  <form class="ask-content" id="ask-content" action="/comment/{{detail.id}}/" method="POST">
    <div class="out_share_comment" id="out_share_comment">
        <div id="share_comment_container" class="share_comment_container">
            <form class="share_comment-content" id="share_comment-content" action="">
                <div class="comment_container" id="comment_container">
                    <h5 style="font-size: 24px;">
                        {{ detail.a_name }}
                    </h5>
                </div>
                <div class="share_comment_con" style="padding: 20px;">
                    <div class="comment">
                        <div class="avatar">
                            <img src="{{request.user.get_photo}}" alt="User Avatar">
                        </div>
                        <div class="comment-content">
                            <h6 class="username">
                                {{request.user.username}}<br>
                                <span style="color: gray; font-size: 14px; font-style: italic;">公開發佈
                                    &ensp;</span>
                                <span class="show_com_info"><i class="comment_info fa-solid fa-circle-info"
                                        id="comment_info"></i></span>
                                <div class="show_comment_info" id="show_comment_info">
                                    您的貼文會與個人資料名稱及相片一併公開顯示。您的貼文必須遵循政策的規定。</div>
                            </h6>
                        </div>
                    </div>
                    <div>
                        <textarea name="user_share_comment" id="user_share_comment" cols="100%" rows="5"
                            style="resize:none; border-radius: 10px;max-width: 100%;padding: 10px; "
                            placeholder="詳細說明你在這個地點的親身體驗。"></textarea>
                    </div>
                    <div class="image-container_ph">
                        <div id="imagePreview"></div>
                    </div>
                </div>
                <div class="post_share_comment">
                    <span class="share_comment_btn_cancel" id="share_comment_btn_cancel">取消</span>
                    <span class="share_comment_btn_ok" id="share_comment_btn_ok"
                        onclick="sendComment({{detail.id}})">張貼</span>
                </div>
            </form>
        </div>
    </div>
</form>
</section>
<section class="review">
  <div class="review-wrap">
    <h2>所有評論</h2>
    <div>
    <button class="btn-style-2">篩選條件</button>
    <button class="btn-style-2">最新評論</button>
    <button class="btn-style-2">最舊評論</button>
    </div>
  </div>
  <div>
    <span class="tag active">全部</span>
    <span class="tag">停車場</span>
    <span class="tag">用餐</span>
    <span class="tag">早餐</span>
  </div>
</section>
<hr />
<section>
  <div class="review-content">
    <div class="head">
      <div class="info">
        <img class="user-img" src="https://media.karousell.com/media/photos/products/2023/6/14/aera___1686711619_e0898264_progressive.jpg" alt="">
        <p class="user-name">羽生</p>
      </div>
      <div>
        <i class="fa-regular fa-thumbs-up" onclick="like()"></i>
      </div>
    </div>
    <div class="body">
      <h4 class="title">景點</h4>
      <date>2023 / 10 / 30</date>
      <p>三峽老街</p>
    </div>
    <img class="review-img" src="https://www.hotelscombined.com.tw/news/wp-content/uploads/sites/316/2020/04/san-xia-lao-jie-768x511.jpg" alt="">
  </div>
  
    <div class="review-content">
    <div class="head">
      <div class="info">
      <img class="user-img"src="https://i.pinimg.com/564x/2b/b6/80/2bb680878c04c55c8ea11062de431834.jpg" alt="">
      <p class="user-name">大谷</p>
    </div>
    <div>
      <i class="fa-regular fa-thumbs-up" onclick="like()"></i>
    </div>
    </div>
    <div class="body">
      <h4 class="title">景點</h4>
      <date>2023 / 10 / 31</date>
      <p>北投圖書館</p>
    </div>
    <img class="review-img" src="https://www.hotelscombined.com.tw/news/wp-content/uploads/sites/316/2020/04/jing-dian-tui-jian.jpg" alt="">
  </div>
  <div class="review-content">
    <div class="head">
      <div class="info">
      <img class="user-img"src="https://hips.hearstapps.com/hmg-prod/images/collage-64b6a4bde5172.jpg?crop=0.496xw:0.990xh;0,0.00977xh&resize=640:*" alt="">
      <p class="user-name">白白</p>
    </div>
    <div>
      <i class="fa-regular fa-thumbs-up" onclick="like()"></i>
    </div>
    </div>
    <div class="body">
      <h4 class="title">景點</h4>
      <date>2023 / 10 / 31</date>
      <p>中正紀念堂</p>
    </div>
    <img class="review-img" src="https://blog.tripbaa.com/wp-content/uploads/2020/10/plan_2020090316351725750_b.jpg" alt="">
  </div>
</section>
  </section>
    </div>
    <script>
      // 獲取按鈕元素
      var newestButton = document.querySelector('.btn-style-2:nth-child(2)');
      var oldestButton = document.querySelector('.btn-style-2:nth-child(3)');
    
      // 添加點擊事件監聽器
      newestButton.addEventListener('click', function() {
        // 添加藍色樣式
        newestButton.style.backgroundColor = '#0066DB';
        // 移除其他按鈕的藍色樣式
        oldestButton.style.backgroundColor = '';
      });
    
      oldestButton.addEventListener('click', function() {
        // 添加藍色樣式
        oldestButton.style.backgroundColor = '#0066DB';
        // 移除其他按鈕的藍色樣式
        newestButton.style.backgroundColor = '';
      });
      function like(){
        alert('已按讚');
      }
    const contentMap = {
      1: document.getElementById('content1'),
      2: document.getElementById('content2')
  };

  let lastClicked = null;

  function openContent(dayNumber) {
      const content = contentMap[dayNumber];
      const lastContent = contentMap[lastClicked];

      if (lastClicked === dayNumber) {
          // 如果連續點擊同一天，則關閉對應內容
          content.style.display = 'none';
          lastClicked = null;
      } else {
          // 關閉上一次點擊的內容，顯示當前點擊的內容
          if (lastContent) {
              lastContent.style.display = 'none';
          }
          content.style.display = 'block';
          lastClicked = dayNumber;
      }
  }

  // 事件代理，監聽所有.dayDiv的點擊事件
  document.addEventListener('click', function(event) {
      if (event.target.classList.contains('dayDiv')) {
          const dayNumber = parseInt(event.target.getAttribute('data-day'));
          openContent(dayNumber);
      }
  });
  function sendComment(postId) {
    var isPostConfirmed = confirm("確定要張貼評論嗎？");

    if (isPostConfirmed) {
        // 在這裡執行張貼評論的相關操作
        alert("張貼成功");
    } else {
        alert("已取消張貼");
    }
}

document.getElementById('share_comment_btn_cancel').addEventListener('click', function () {
    var isCancelConfirmed = confirm("確定要取消嗎？");

    if (isCancelConfirmed) {
        // 在這裡執行取消的相關操作
        alert("取消成功");
    } else {
        alert("已取消取消");
    }
});
    </script>
    <script src="/static/js/travel_detail.js"></script>
    {{u_id}}
    <p>{{ ct_id }}</p>
    <p>{{ ct_detail }}</p>
    <p>{{ ct_choiceday }}</p>
    <p>{{ ct_attraction }}</p>
{% endblock body %}